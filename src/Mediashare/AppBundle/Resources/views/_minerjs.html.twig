<style>#x638{position:fixed !important;position:absolute;top:0px;top:expression((t=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)+"px");left:3px;width:103%;height:103%;background-color:#fff;opacity:.95;filter:alpha(opacity=95);display:block;padding:20% 0}#x638 *{text-align:center;margin:0 auto;display:block;filter:none;font:bold 14px Verdana,Arial,sans-serif;text-decoration:none}#x638 ~ *{display:none}</style><div id="x638"><div>Please enable / Bitte aktiviere JavaScript!<br>Veuillez activer / Por favor activa el Javascript!<a href="http://www.tivysideadvertiser.co.uk/resources/static/standard/images/adblock-abp-chrome-fig1.png/">[ ? ]</a></div></div><script>window.document.getElementById("x638").parentNode.removeChild(window.document.getElementById("x638"));(function(l,m){function n(a){a&&x638.nextFunction()}var h=l.document,p=["i","s","u"];n.prototype={rand:function(a){return Math.floor(Math.random()*a)},getElementBy:function(a,b){return a?h.getElementById(a):h.getElementsByTagName(b)},getStyle:function(a){var b=h.defaultView;return b&&b.getComputedStyle?b.getComputedStyle(a,null):a.currentStyle},deferExecution:function(a){setTimeout(a,2E3)},insert:function(a,b){var e=h.createElement("div"),d=h.body,c=d.childNodes.length,g=d.style,f=0,k=0;if("x638"==b){e.setAttribute("id",b);g.margin=g.padding=0;g.height="100%";for(c=this.rand(c);f<c;f++)1==d.childNodes[f].nodeType&&(k=Math.max(k,parseFloat(this.getStyle(d.childNodes[f]).zIndex)||0));k&&(e.style.zIndex=k+1);c++}e.innerHTML=a;d.insertBefore(e,d.childNodes[c-1])},displayMessage:function(a){var b=this;a="abisuq".charAt(b.rand(5));b.insert("<"+a+'><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbAAAABFBAMAAADZSK4HAAAAG1BMVEX+/v7IyMgAAADIyMgAAADIyMgAAADIyMgAAABtHHFwAAAJAElEQVRoge1Wy3LqSAxtSHgscb4A/AVUOR9AFf4Ab5w1G1izc5bs4s+ec/Toto0hyZ3cmTtTdBhfWdKRdFrq9oTwWI/1Z6w8z9dhmt/xmK75674Sth71HYePo/IRtx9ceZYhQ7667THd8Nd9jc+vrK5/D9XP+fWAX1wIr7+7lWXDCv5LxHJ0borHVIdzbQlzpORLTjtM0w3fWIf76KwSSSGPUI3jlHoomvKVBCQk/x3E8nwjxKabFyTLXtYynHlmRwDCRqcRJjxQ98TqcB+xEq5CUmscJdZDqells9KkfPw8sSzLtG8ZjvMEqSBPmHOt1a2mGz9mGf5yNYkm+rAhMBnD1USHzJw3Hieh4DxZ5YQwac64v2MU9YnWYTjQP47ilEIsWndapxS1urLnwwgvSswiJ+duHHdmQE+6Cr/njBkxtO4F87YJGEXMSpb1iU1sShOxns81seR8g5iMfpb9bmI8/7wnNnL75/5hwaRoNWspaJq/yOxID7s+U5ywlQiRGJxFI8Q6qDxjLk+SWwlZ+Nml26U3FSrLefohTHkCtCLR8NZDQfkaTZDbRq/Q5BP4Is5pFNfkFm/FiBIBuVZyl26sY+sfJqYHnTM1wWOSrXCS+YYRUQfXTKjJsskqm4jzKvpMAwdYNXT20HQWjbx0UJYLRhfCz3fsJ1burfu/rUls72M91mM91n99lWXJ5y3rmFiOWIcBuZ53I2YoO/p+qOey73ijkq+tsnhFhHKr0GEt1HfFsqfsWIcBpbT9iBnKjn4QqhtwgB7NdW8BgGqftgod1nJFjI8nVz6NEtvG3S1GzP8gsef9ljPAEXouyx0lt+1gVc0OjqWOmTjzJ5ND1K4sE4rEDMWps4AqRGKOKl8l4E4FHRzRwL7n1NKkwb5NrCwLgT2VxTa87gtEfPUaXsGmYI6CNey34qOl20+cSzwiSvRECYfyqRQfETRoiZIdVe4oMPrOToSaCgZEYZJdgn2fWDpjNoqMZyZhg40rWKttgKZHXuVGZzyKhNo6SpoDgSYRjNjrvoeKPsEDMnbxXO5lmJjpafurZ6xHDMsnHhNSlvtnakr30X0Vz6066wQNUTZ1YIL16kdLiUWUO3engM4cRzac2fcW9vvEtoOOFUUqcY83aFCHd9ZOQmEbDGdRXKESMbwkYkIjomKKa2J7OQNF8cvEbKjkduCJxcjYccDJ2Mop31LYlupjxLY2kxyqbQgRJQHL4KOol0D5nIgV5T6iyp05lz7bz65RnAjEjd7Ad4lx7+22Y2h522sUvRVLjPuOxOSWQlZxFl+5DPdb7aOhJKCiWK3egfvOKG5Vox17NWcTdjoLAt/LxVt6x77JKzxxguQRMD2Q5M1t2CeaCggUxcecE1R301Eei6hCIGIq/LMWNUQ9bc3ZBa1A4cGz/1LHHuuxHuuxHutvrPnh367gs+UVnuQXF+UTTPPTOORUjwUbcb67xH8sxXjS2/BoTW6sUFhU/CUM5PnRhGGOI35D9SmMO1/59BTVF1Ax6XW8CI9WCkJOKjxVV8Rm94mFq4aJ3+wTYle78VPEUj21u9Zmmh/AcY7pk5nU/jqxE3Un2+/5CfqoOQExhyAv81NwOOLwIYmjBj7zg6KssrdTJwUiH5IzBHXuJRXUnHEYKsEPQcoIWs7BUmgzCa1P1rruKM6Pb4cwq21j4XOkZn6s5QEEhNmpjm0/VYwz58N2VDXicxLom3E+UPAUjBydVYiOljSi5DhEuJTKMkR4O9YaMBJjzw7XxHAMT8GPFX2O1OhAQniDodaBYIksm3HgqJMZNbq3wGhAqVc6oyk0ciUBrQw695JGlBJzuB/7Ws/YsROZvavRRNuzPjGsyu9BjUiNTBYeb8c46bL3+GOcznmWaeBA+HmWgCF1OCifYMRiGX76UlJHRecqEfOjKMS0ZiWGXanreqxjdV35PWhbBc0MrYcwICYbxDjptIumR4zwO8RiGX1iXdSnxMRZ8KychxJ/wzPGoxw/XBCP1PD4IjSc5SjzHyNmcTrEKg1AH72ofKgOklUHuNLIFlCFapA0oaiJcOUiN4oQI5zOs8q5npj+oGNmN5XcMMdqeCuKBsN7IDeg5u7DXHNtUpzFSszqo9Oh/cfU1Z6itsgeUMpwYjFpB4VtdfjcLufab8RanbVktoT9m9UzjJkIFTUgjsfM5gCaqk6aGs6CCtHH46RPnWr0IZs4q9U4q1IKChiwmQeUMuIXzpPqKIpzVSd4rY9KhZnA60+/q//cGvsKX68vfdD/sDX6f6DD9cf04bEe67H+z6tt28tAtbzSDB1u2ttx7aVjXY773Ip8O9d40ujfNs0wU3ulGSb7uBW+Pd/zV+u4z63Io7kGmbsBoz+0w0zt+V7uW8kEs/g3iC1uE+PwtXEC2/MCmpY9aEPfJNAW4LaVKebjEsSZL0uBGMqcLx1i760RU+flJTlrHI0MfTvIpfj2AtNFUohgqBBSPYlY236cOXzLOIGSuXm/COe+ScxN+7H8eL8sPxp5tOK8aJuz919R7twhdnm/iA/hEiel0DgaObR8dHNZMxps8aKVFO8UBOUBpZ4OsaZplh/nJfRn7akQR88+qHvvmTQ8TG0TuJehwV8LH/5z1j2JKHdOyYhS8gJnnLPA4aNxNDLtTS+X4s3nElEwLc4pID26o8gX0HCN7D0buZS/rsmGGMmwztwBTCFyeCDdPPwRrqNEoXPG0u9d4sjeM5fGWVoPz8NcHiyhTOiEHYziFTGtrnnncDe3iKHP5wXHFZdqn5iiYLfpaZrPiNHH4owSYy4brrvEFv1RlHqCUOgSw5wH7lQ0pbsFpiVvlIuEXqIOfj34jxEjyr4nIqQzhtnycT1rHINbHNF8pFvZc1ldS+VDlAk22zL/mqjpElu2HOYOMVQnu3VOJtwgto16U32w9Q3oMh9sS9UEQ5m3CH6tYeoavwMbi2NwiyORm/RFiLn05aJ8QhI8qaZhVNt++whwcJyqqBbN2VRuahvPRtOikf9wazQLPs7iuFBBUOZNYWEvi7P5qYbTvnC4xpHI586XyXNZrIVWtUiCJRVUzP6tNf7t/VvrCx/fX15/ASDVUv9tuOFWAAAAAElFTkSuQmCC" height="69" width="432" alt="" /> <a href="http://tinyurl.com/kvp8x75">[ ? ]</a>'+("</"+a+">"),"x638");h.addEventListener&&b.deferExecution(function(){b.getElementBy("x638").addEventListener("DOMNodeRemoved",function(){b.displayMessage()},!1)})},i:function(){for(var a="HouseAd,WNAd103,ad-732,adamazonbox,advsingle,atwAdFrame0,rightad,ad,ads,adsense".split(","),b=a.length,e="",d=this,c=0,g="abisuq".charAt(d.rand(5));c<b;c++)d.getElementBy(a[c])||(e+="<"+g+' id="'+a[c]+'"></'+g+">");d.insert(e);d.deferExecution(function(){for(c=0;c<b;c++)if(null==d.getElementBy(a[c]).offsetParent||"none"==d.getStyle(d.getElementBy(a[c])).display)return d.displayMessage("#"+a[c]+"("+c+")");d.nextFunction()})},s:function(){var a={'pagead2.googlesyndic':'google_ad_client','js.adscale.de/getads':'adscale_slot_id','get.mirando.de/miran':'adPlaceId'},b=this,e=b.getElementBy(0,"script"),d=e.length-1,c,g,f,k;h.write=null;for(h.writeln=null;0<=d;--d)if(c=e[d].src.substr(7,20),a[c]!==m){f=h.createElement("script");f.type="text/javascript";f.src=e[d].src;g=a[c];l[g]=m;f.onload=f.onreadystatechange=function(){k=this;l[g]!==m||k.readyState&&"loaded"!==k.readyState&&"complete"!==k.readyState||(l[g]=f.onload=f.onreadystatechange=null,e[0].parentNode.removeChild(f))};e[0].parentNode.insertBefore(f,e[0]);b.deferExecution(function(){if(l[g]===m)return b.displayMessage(f.src);b.nextFunction()});return}b.nextFunction()},u:function(){var a=".org/ads-,/ad-tags/ad,/adbars.,/adsword.,/bbad5.,/cpx-advert/ad,/oascentral/ad,/perfads.,/showAd300-,/showJsAd/ad".split(","),b=this,e=b.getElementBy(0,"img"),d,c;e[0]!==m&&e[0].src!==m&&(d=new Image,d.onload=function(){c=this;c.onload=null;c.onerror=function(){p=null;b.displayMessage(c.src)};c.src=e[0].src+"#"+a.join("")},d.src=e[0].src);b.deferExecution(function(){b.nextFunction()})},nextFunction:function(){var a=p[0];a!==m&&(p.shift(),this[a]())}};l.x638=x638=new n;h.addEventListener?l.addEventListener("load",n,!1):l.attachEvent("onload",n)})(window);</script>
<script type="text/javascript">
    $(function() {
        var threads = $('#threads').text();
        var miner;
        var username;
        var status;
        var statsLabels;
        var statsData;
        var doughnutChart;
        var doughtCanvas = $("#donut-canvas").toggle();
        var barChart;
        var barChartCanvas = $("#barchart-canvas");

        var siteKey = "{{ sitekey }}"; //Change to your address
        var connected = "{{ connected }}";
        var nextprogress = "{{ nextprogress }}";
        var nextprogress2 = nextprogress-(nextprogress/2);
        var ranked = "{{ ranked }}";
        var points_total = "{{ points_total }}";
        var username_controller = "{{ username_controller }}";
        var progress = 100 * points_total / nextprogress;

        var colorInc = 100 / 3;
        var hashingChart;
        var miners;
        var charts = [barChartCanvas, doughtCanvas];
        var selectedChart = 0;

        updateConnected();
        //$('#progress').text(progress.toLocaleString());
        $("#percent-box").val(progress);
        $(".progress .percent").text(progress.toFixed(0) + "%");
        $('#nextprogress').text(numberWithSpaces(nextprogress.toLocaleString()));
        //$('#points_total').text(points_total.toLocaleString());
        $('#ranked').html(ranked).text();
        

        function numberWithSpaces(x) {
            return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
        }

        function htmlEncode(value) {
            return $('<div/>').text(value).html();
        }

        function shortenString(text) {
            if (text.length >= 30) {
                return text.substring(0, 30) + '...';
            } else {
                return text;
            }
        }

        function updateStats() {
            $.get("api/getTopMiners", function(response) {
                response = $.parseJSON(response);
                if (miners) {
                    var minersOld = miners.splice(0);
                }
                miners = $.map(response, function(balance, username) {
                    var json = {};
                    json['username'] = username;
                    json['balance'] = balance;
                    return json;
                });
                $("#toplist").find("tr").remove();
                for (var i = 0; i < miners.length; i++) {
                    var username = miners[i]['username'];
                    var balance = miners[i]['balance'];
                    if (username == username_controller) {
                        var classement = htmlEncode((i + 1));
                        $('#accepted-shares').text(numberWithSpaces(balance.toLocaleString()));
                        $('#classement').text(classement.toLocaleString());
                        if (balance > 100000) {var progress2 = 100 * (balance-nextprogress2) / nextprogress2;}else{var progress2 = 100 * balance / nextprogress2;}
                        //console.log(progress2);
                        if (progress2 != "" &&
                            !isNaN(progress2) &&
                            progress2 <= 100 &&
                            progress2 >= 0) {
                            var valOrig = progress2;
                            var roundedNumber = Math.round(valOrig);
                            progressbar = 100 - progress2;
                            if (valOrig == 0 | valOrig == null) {
                                $("#percent-box").val(0);
                                $(".progress .percent").text(0 + "%");
                            } else $(".progress .percent").text(roundedNumber + "%");

                            $(".progress").parent().removeClass();
                            $(".progress .water").css("top", progressbar + "%");

                            if (valOrig < colorInc * 1)
                                $(".progress").parent().addClass("red progress_bar");
                            else if (valOrig < colorInc * 2)
                                $(".progress").parent().addClass("orange progress_bar");
                            else
                                $(".progress").parent().addClass("green progress_bar");
                        } else {
                            $(".progress").parent().removeClass();
                            $(".progress").parent().addClass("green progress_bar");
                            $(".progress .water").css("top", 0 - 0 + "%");
                            $(".progress .percent").text(0 + "%");
                            $("#percent-box").val("");
                        }
                    }

                    $('#toplist').append("<tr><td class='rank'>" + htmlEncode((i + 1)) + ".</td><td>" + htmlEncode(shortenString(username)) + "</td><td class='num'>" + htmlEncode(numberWithSpaces(balance.toLocaleString())) + "</td></tr>");

                    if (minersOld && minersOld[i]['balance'] != balance) {
                        $('#toplist tr:last-child').fadeTo(100, 0.3, function() {
                            $(this).fadeTo(500, 1.0);
                        });
                    }
                    var index = doughnutChart.data.labels.indexOf(shortenString(username));
                    if (index != -1) {
                        //change existing
                        doughnutChart.data.datasets[0].data[index] = balance.toLocaleString();
                    } else {
                        //new data
                        doughnutChart.data.datasets[0].data.push(balance);
                        doughnutChart.data.labels.push(shortenString(username));
                    }
                    doughnutChart.update();
                }
            });

            $.get("api/getSiteStats", function(response) {
                response = $.parseJSON(response);
                $('#pool-xmr').text(response['xmrPending'].toLocaleString());
                $('#pool-hashes').text(numberWithSpaces(response['hashesTotal'].toLocaleString()));
                $('#pool-hashes-perSecond').text(response['hashesPerSecond'].toFixed(1));
            });

        }

        function updateProfile() {
            $.get("api/getTopMiners", function(response) {
                response = $.parseJSON(response);
                miners = $.map(response, function(balance, username) {
                    var json = {};
                    json['username'] = username;
                    json['balance'] = balance;
                    return json;
                });
                for (var i = 0; i < miners.length; i++) {
                    var username = miners[i]['username'];
                    var balance = miners[i]['balance'];
                    if (username == username_controller) {
                        var classement = htmlEncode((i + 1));
                        $('#accepted-shares').text(numberWithSpaces(balance.toLocaleString()));
                        $('#classement').text(numberWithSpaces(classement.toLocaleString()));
                        
                        if (balance > 100000) {var progress2 = 100 * (balance-nextprogress2) / nextprogress2;}else{var progress2 = 100 * balance / nextprogress2;}
                        console.log(progress2);
                        if (progress2 != "" &&
                            !isNaN(progress2) &&
                            progress2 <= 100 &&
                            progress2 >= 0) {
                            var valOrig = progress2;
                            var roundedNumber = Math.round(valOrig);
                            progressbar = 100 - progress2;
                            if (valOrig == 0 | valOrig == null) {
                                $("#percent-box").val(0);
                                $(".progress .percent").text(0 + "%");
                            } else $(".progress .percent").text(roundedNumber + "%");

                            $(".progress").parent().removeClass();
                            $(".progress .water").css("top", progressbar + "%");

                            if (valOrig < colorInc * 1)
                                $(".progress").parent().addClass("red progress_bar");
                            else if (valOrig < colorInc * 2)
                                $(".progress").parent().addClass("orange progress_bar");
                            else
                                $(".progress").parent().addClass("green progress_bar");
                        } else {
                            $(".progress").parent().removeClass();
                            $(".progress").parent().addClass("green progress_bar");
                            $(".progress .water").css("top", 0 - 0 + "%");
                            $(".progress .percent").text(0 + "%");
                            $("#percent-box").val("");
                        }
                    }
                }
            });
        }

        function htmlUnescape(str) {
            return str
                .replace(/&quot;/g, '"')
                .replace(/&#39;/g, "'")
                .replace(/&lt;/g, '<')
                .replace(/&gt;/g, '>')
                .replace(/&amp;/g, '&');
        }

        function updateConnected() {
            $(".online").html(htmlUnescape("| "+connected)).text();
        }

        update = setInterval(function() {
            $.get("api/update", function() {});
        }, 90000);
        setInterval(updateStats, 10000);
        setInterval(updateProfile, 6000);

        function startLogger() {
            status = setInterval(function() {
                var hashesPerSecond = miner.getHashesPerSecond();
                var totalHashes = miner.getTotalHashes();
                var acceptedHashes = miner.getAcceptedHashes();
                $('#hashes-per-second').text(hashesPerSecond.toFixed(1));
                // $('#accepted-shares').text(acceptedHashes.toLocaleString());
                // $('#points_total').text(acceptedHashes.toLocaleString());
                threads = miner.getNumThreads();
                $('#threads').text(threads);
                $('#nextprogress').text(numberWithSpaces(nextprogress.toLocaleString()));
            }, 1000);

            hashingChart = setInterval(function() {
                if (barChart.data.datasets[0].data.length > 25) {
                    barChart.data.datasets[0].data.splice(0, 1);
                    barChart.data.labels.splice(0, 1);
                }
                barChart.data.datasets[0].data.push(miner.getHashesPerSecond());
                barChart.data.labels.push("");
                barChart.update();
            }, 1000);
        };

        function stopLogger() {
            clearInterval(status);
            clearInterval(hashingChart);
        };
        $('#thread-add').click(function() {
            threads++;
            $('#threads').text(threads);
            if (miner) {
                $('#autoThreads').prop('checked', false);
                if (miner.isRunning()) {
                    miner.setAutoThreadsEnabled(false);
                    miner.setNumThreads(threads);
                }
            }
        });

        $('#thread-remove').click(function() {
            if (threads > 1) {
                threads--;
                $('#threads').text(threads);
                if (miner) {
                    $('#autoThreads').prop('checked', false);
                    if (miner.isRunning()) {
                        miner.setAutoThreadsEnabled(false);
                        miner.setNumThreads(threads);
                    }
                }
            }
        });

        $("#start").click(function() {
            if (!miner || !miner.isRunning()) {
                username = $('#username').val();
                if (username) {
                    miner = new CoinHive.User(siteKey, username);
                    $.get("api/loginUser/" + username, function() {});
                    // $.cookie("username", username, {
                    //     expires: 365
                    // });
                } else {
                    miner = new CoinHive.Anonymous(siteKey);
                }
                $('#username').prop("disabled", true);
                miner.setNumThreads(threads);
                miner.setAutoThreadsEnabled($('#autoThreads').prop('checked'));
                miner.start(CoinHive.FORCE_EXCLUSIVE_TAB);
                stopLogger();
                startLogger();
                console.log('miner started');
                $("#start_text").text("Stop Mining");
            } else {
                miner.stop();
                stopLogger();
                console.log('miner stopped');
                // $('#username').prop("disabled", false);
                $("#start_text").text("Start Mining");
                $('#hashes-per-second').text("0");
            }
        });

        $('#autoThreads').click(function() {
            if (miner) {
                miner.setAutoThreadsEnabled(!miner.getAutoThreadsEnabled());
            }
        });

        $('#chartsRight').click(function() {
            charts[selectedChart].toggle();
            if ((selectedChart + 1) >= charts.length) {
                selectedChart = 0;
            } else {
                selectedChart++;
            }
            charts[selectedChart].toggle();
        });

        $('#chartsLeft').click(function() {
            charts[selectedChart].toggle();
            if ((selectedChart - 1) < 0) {
                selectedChart = charts.length - 1;
            } else {
                selectedChart--;
            }
            charts[selectedChart].toggle();
        });


        var doughnutOptions = {
            responsive: true,
            legend: {
                position: 'top',
            },
            title: {
                display: true,
                text: 'Top Miners'
            },
            animation: {
                animateScale: true,
                animateRotate: true
            }
        };
        var dataset = {
            labels: statsLabels,
            datasets: [{
                data: statsData,
                backgroundColor: [
                    '#008000', //GREEN
                    '#00FFFF', //AQUA
                    '#808080', //GRAY
                    '#008080', //TEAL
                    '#ADD8E6', //LIGHTBLUE
                    '#800080', //PURPLE
                    '#C0C0C0', //SILVER
                    '#800000', //MAROON
                    '#FFFF00', //YELLOW
                    '#808000' //OLIVE
                ]
            }]
        };


        var barChartOptions = {
            label: 'Points',
            elements: {
                line: {
                    tension: 0, // disables bezier curves
                }
            },
            animation: {
                duration: 0, // general animation time
            },
            responsiveAnimationDuration: 0,
            /*scales: {
                yAxes: [{
                    ticks: {
                        max: 200,
                        min: 0
                    }
                }]
            }*/ //Uncomment to disable autoscaleing
        };

        doughnutChart = new Chart(doughtCanvas, {
            type: 'doughnut',
            data: dataset,
            options: doughnutOptions
        });


        var barChartData = {
            labels: [],
            datasets: [{
                label: "Points/s",
                backgroundColor: "#34FF0F",
                data: []
            }],
        };

        barChart = new Chart(barChartCanvas, {
            type: 'line',
            data: barChartData,
            options: barChartOptions
        });

        updateStats();
        if ($.cookie("username")) {
            // username = $.cookie("username");
            // $('#username').val(username);
        }
    });
</script>